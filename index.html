<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HOA LAN HỒ ĐIỆP DŨNG TRANG - ĐÀ LẠT</title>

<style>
body {
    font-family: Arial;
    background: url('background2.jpg') no-repeat center center fixed;
    background-size: cover;
    padding: 20px;
    color: #333;
}
h1 {
    text-align: center;
    font-size: 36px;
    color: #0074D9;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    margin-bottom: 10px;
}
.subtitle {
    text-align: center;
    font-size: 18px;
    margin: 3px 0;
}
.subtitle a {
    color: inherit;
    text-decoration: none;
}
.phone { color: #2ECC40; }
.zalo { color: #2ECC40; }
.address { color: #8E44AD; }

#folders {
    text-align: center;
    margin: 20px 0;
}
select {
    padding: 10px;
    font-size: 16px;
    margin: 5px;
}

.album-title {
    text-align: center;
    margin: 30px 0 10px;
    font-weight: bold;
    font-size: 18px;
}

.gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}
.gallery img {
    width: 220px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    transition: 0.2s;
    cursor: pointer;
}
.gallery img:hover {
    transform: scale(1.05);
}

/* Lightbox */
#lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    flex-direction: column;
}
#lightbox img {
    max-width: 90%;
    max-height: 80%;
    border-radius: 8px;
    margin-bottom: 15px;
}
#lightbox button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #fff;
    margin: 0 5px;
}
#lightbox-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
}
</style>
</head>

<body>

<h1>HOA LAN HỒ ĐIỆP DŨNG TRANG - ĐÀ LẠT</h1>

<div class="subtitle phone">
    <a href="tel:0918604260">Điện thoại: 0918.60.42.60</a>
</div>
<div class="subtitle zalo">
    <a href="https://zalo.me/0918604260" target="_blank">Zalo: 0918.60.42.60</a>
</div>
<div class="subtitle address">
    Địa chỉ: 08 Lý Thường Kiệt, Đức Trọng, Lâm Đồng
</div>

<div id="folders">
    <label>Chọn album: </label>
    <select id="folderSelect">
        <option value="all">Tất cả album</option>
    </select>
</div>

<div id="gallery"></div>

<!-- Lightbox -->
<div id="lightbox">
    <img id="lightbox-img" src="">
    <div id="lightbox-controls">
        <button onclick="prevImage()">« Trước</button>
        <button onclick="nextImage()">Sau »</button>
        <button onclick="closeLightbox()">Đóng</button>
    </div>
</div>

<script>
const USERNAME = "ductrong49";
const REPO = "dungtrang_orchid";

const repoAPI = `https://api.github.com/repos/${USERNAME}/${REPO}/contents`;

const albumsMap = {
    "Mẫu Hoa": "MauHoa",
    "Mẫu Đại": "mau_dai",
    "Mẫu Trung": "mau_trung",
    "Mẫu Mini": "mau_mini"
};

let allFolders = Object.keys(albumsMap);
let currentFolder = "all";
let galleryImages = [];
let currentIndex = 0;

/* Load album list dropdown */
function loadAlbumSelect() {
    const select = document.getElementById("folderSelect");

    allFolders.forEach(name => {
        const opt = document.createElement("option");
        opt.value = albumsMap[name];
        opt.textContent = name;
        select.appendChild(opt);
    });

    select.addEventListener("change", () => {
        const val = select.value;
        if (val === "all") loadImages("all");
        else loadImages(val);
    });
}

/* Load images */
async function loadImages(folder) {
    const galleryDiv = document.getElementById("gallery");
    galleryDiv.innerHTML = "";
    galleryImages = [];

    if (folder === "all") {
        for (const [displayName, repoName] of Object.entries(albumsMap)) {

            const title = document.createElement("div");
            title.className = "album-title";
            title.textContent = displayName;
            galleryDiv.appendChild(title);

            const res = await fetch(`${repoAPI}/${repoName}`);
            const files = await res.json();

            const images = files
                .filter(f => /\.(jpg|jpeg|png|gif|webp)$/i.test(f.name))
                .map(f => f.download_url);

            galleryImages = galleryImages.concat(images);

            const albumGallery = document.createElement("div");
            albumGallery.className = "gallery";

            images.forEach(url => {
                const img = document.createElement("img");
                img.src = url;
                img.onclick = () => openLightbox(url);
                albumGallery.appendChild(img);
            });

            galleryDiv.appendChild(albumGallery);
        }

    } else {
        const displayName = Object.keys(albumsMap).find(key => albumsMap[key] === folder);

        const title = document.createElement("div");
        title.className = "album-title";
        title.textContent = displayName;
        galleryDiv.appendChild(title);

        const res = await fetch(`${repoAPI}/${folder}`);
        const files = await res.json();

        const images = files
            .filter(f => /\.(jpg|jpeg|png|gif|webp)$/i.test(f.name))
            .map(f => f.download_url);

        galleryImages = images;

        const albumGallery = document.createElement("div");
        albumGallery.className = "gallery";

        images.forEach(url => {
            const img = document.createElement("img");
            img.src = url;
            img.onclick = () => openLightbox(url);
            albumGallery.appendChild(img);
        });

        galleryDiv.appendChild(albumGallery);
    }
}

/* Lightbox */
function openLightbox(url) {
    currentIndex = galleryImages.indexOf(url);
    document.getElementById("lightbox-img").src = url;
    document.getElementById("lightbox").style.display = "flex";
}
function closeLightbox() {
    document.getElementById("lightbox").style.display = "none";
}
function prevImage() {
    currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
    document.getElementById("lightbox-img").src = galleryImages[currentIndex];
}
function nextImage() {
    currentIndex = (currentIndex + 1) % galleryImages.length;
    document.getElementById("lightbox-img").src = galleryImages[currentIndex];
}

/* Start */
loadAlbumSelect();
loadImages("all");
</script>

</body>
</html>
