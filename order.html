<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đặt Hàng – Nhiều Sản Phẩm</title>
<style>
  body {
    font-family: Arial;
    background: #f3f3f3;
    padding: 20px;
  }
  .container {
    max-width: 600px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin: 6px 0 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
  }
  button {
    width: 100%;
    padding: 12px;
    border: none;
    color: white;
    background: #007bff;
    font-size: 16px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 10px;
  }
  #addProductBtn { background: #28a745; }
  #newOrderBtn { background: #ff4d4d; }

  #resultBox {
    margin-top: 20px;
    padding: 15px;
    background: white;
    border-radius: 10px;
    border: 1px solid #ddd;
    white-space: pre-wrap;
    min-height: 160px;
  }
</style>
</head>
<body>

<div class="container">

  <h2>Form Đặt Hàng</h2>

  <!-- THÔNG TIN CHUNG -->
  <label>Tên khách</label>
  <input id="tenkhach" oninput="refreshResult()">

  <label>Địa chỉ</label>
  <input id="diachi" oninput="refreshResult()">

  <!-- FORM NHẬP HÀNG HÓA -->
  <h3>Thêm hàng hóa</h3>

  <label>Tên hàng</label>
  <input id="tenhang">

  <label>Số lượng</label>
  <input id="soluong">

  <label>NCC</label>
  <input id="ncc">

  <label>Giá</label>
  <input id="gia">

  <button id="addProductBtn" onclick="addProduct()">+ Thêm hàng hóa</button>

  <!-- THÔNG TIN CUỐI -->
  <label>Cước</label>
  <input id="cuoc" oninput="refreshResult()">

  <label>Ghi chú</label>
  <textarea id="ghichu" rows="3" oninput="refreshResult()"></textarea>

  <label>NV Sale</label>
  <input id="nhanvien" oninput="refreshResult()">

  <div id="resultBox"></div>

  <button onclick="copyText()">Copy Text</button>
  <button id="newOrderBtn" onclick="newOrder()">Tạo đơn mới</button>

</div>

<script>
let products = [];

function addProduct() {
  const tenhang = document.getElementById("tenhang").value.trim();
  const soluong = document.getElementById("soluong").value.trim();
  const ncc = document.getElementById("ncc").value.trim();
  const gia = document.getElementById("gia").value.trim();

  if (!tenhang) {
    alert("Vui lòng nhập TÊN HÀNG!");
    return;
  }

  products.push({ tenhang, soluong, ncc, gia });

  // Clear form hàng hóa
  document.getElementById("tenhang").value = "";
  document.getElementById("soluong").value = "";
  document.getElementById("ncc").value = "";
  document.getElementById("gia").value = "";

  refreshResult();
}

function refreshResult() {
  let text = "";

  // thông tin chung
  text += "Tên khách: " + document.getElementById("tenkhach").value + "\n";
  text += "Địa chỉ: " + document.getElementById("diachi").value + "\n\n";

  // danh sách hàng hóa
  if (products.length > 0) {
    text += "Danh sách hàng hóa:\n";
    products.forEach((p, i) => {
      text += (i + 1) + ". Tên hàng: " + p.tenhang + "\n";
      text += "   Số lượng: " + p.soluong + "\n";
      text += "   NCC: " + p.ncc + "\n";
      text += "   Giá: " + p.gia + "\n\n";
    });
  }

  // cuối đơn
  text += "Cước: " + document.getElementById("cuoc").value + "\n";
  text += "Ghi chú: " + document.getElementById("ghichu").value + "\n";
  text += "NV Sale: " + document.getElementById("nhanvien").value;

  document.getElementById("resultBox").textContent = text;
}

function copyText() {
  const text = document.getElementById("resultBox").textContent;
  navigator.clipboard.writeText(text).then(() => {
    alert("Đã copy nội dung!");
  });
}

function newOrder() {
  document.querySelectorAll("input, textarea").forEach(el => el.value = "");
  products = [];
  document.getElementById("resultBox").textContent = "";
}
</script>

</body>
</html>
